<!-- Shared sidebar fragment -->
<div th:fragment="sidebar">
    <div class="sidebar sidebar-static">
        <div class="logo-details">
            <img th:src="@{/image/logo.png}" alt="CloudCare Logo">
            <span class="logo_name">CloudCare</span>
        </div>

        <ul class="nav-links">
            <li>
                <a th:href="@{/patient/dashboard}">
                    <i class="bx bxs-user"></i>
                    <span class="link_name">Patient Profile</span>
                </a>
            </li>

            <li>
                <a th:href="@{/patient/dataEntry}">
                    <i class="bx bxs-edit"></i>
                    <span class="link_name">Edit Profile</span>
                </a>
            </li>

            <li>
                <a th:href="@{/patient/doctor_list}">
                    <i class="bx bx-list-ul"></i>
                    <span class="link_name">Doctors List</span>
                </a>
            </li>

            <li class="active">
                <a th:href="@{/patient/donor}">
                    <i class="bx bxs-droplet"></i>
                    <span class="link_name">Find Donor</span>
                </a>
            </li>
        </ul>
    </div>
    
    <script>
        // Ensure "Find Donor" stays active on all donor-related pages
        document.addEventListener('DOMContentLoaded', function() {
            const currentPath = window.location.pathname;
            const navItems = document.querySelectorAll('.sidebar .nav-links li');
            
            // Remove active from all items first
            navItems.forEach(li => li.classList.remove('active'));
            
            // Add active only to "Find Donor" if on donor pages (/patient/donor*)
            if (currentPath.includes('/patient/donor')) {
                const findDonorLi = Array.from(navItems).find(li => {
                    const link = li.querySelector('a');
                    return link && link.getAttribute('href') === '/patient/donor';
                });
                if (findDonorLi) findDonorLi.classList.add('active');
            }
        });
    </script>
</div>
