<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${title ?: 'Task'}">Task</title>
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <link rel="stylesheet" th:href="@{/css/style-todo.css}">
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
   <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>

<!-- <div th:replace="~{fragments/sidebar :: sidebar}"></div> -->
 <a href="/patient/dashboard" class="back" style="padding:15px; margin:15px;">
    <i class="fa fa-arrow-left"></i> Back to Dashboard
</a>

<main style="padding:40px;">
  <div class="form-card" style="max-width:900px;margin:0 auto;">
    <div style="margin-bottom:28px;">
      <h1 style="font-size:2rem;color:#040d72;font-weight:700;margin:0;" th:text="${title}">Add / Edit Task</h1>
      <div style="color:#666;margin-top:8px;">Plan your day and stay on top of everything.</div>
    </div>

    <form th:action="@{/patient/tasks/save}" th:object="${task}" method="post">
      <input type="hidden" th:field="*{id}"/>

      <div style="margin-bottom:20px;">
        <label class="label">Task Title</label>
        <input class="input" type="text" th:field="*{title}" required placeholder="Finish project report, Call mom..."/>
      </div>

      <div style="margin-bottom:20px;">
        <label class="label">Description (Optional)</label>
        <textarea class="input" th:field="*{description}" rows="4" placeholder="Add notes, subtasks..."></textarea>
      </div>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:20px;">
        <div>
          <label class="label">Category</label>
          <select class="input" th:field="*{category}">
            <option value="Medicine & Appointment">Medicine & Appointment</option>
            <option value="Physical Health & Fitness">Physical Health & Fitness</option>
            <option value="Mental Health">Mental Health</option>
            <option value="Emergency">Emergency</option>
            <option value="Food & Nutrition">Food & Nutrition</option>
            <option value="Hygiene">Hygiene</option>
          </select>
        </div>
        <div>
          <label class="label">Priority</label>
          <select class="input" th:field="*{priority}">
            <option value="Low">Low</option>
            <option value="Medium">Medium</option>
            <option value="High">High</option>
          </select>
        </div>
      </div>

      <div th:if="${task.id != null}" style="margin-bottom:20px;">
        <label class="label">Current Status</label>
        <select class="input" th:field="*{status}">
          <option value="Pending">Pending</option>
          <option value="In Progress">In Progress</option>
          <option value="Completed">Completed</option>
        </select>
      </div>

      <input type="hidden" th:field="*{dueDate}"/>
      <div style="background:#f1f8ff;border:1px solid rgba(4,13,114,0.1);padding:16px;border-radius:12px;margin-bottom:28px;">
        <strong>Due Date:</strong> This task is scheduled for <strong>Today</strong>.
      </div>

      <div style="display:flex;justify-content:flex-end;gap:16px;">
        <a th:href="@{/patient/tasks}" class="btn btn-outline">Cancel</a>
        <button type="submit" class="btn btn-primary" 
                th:text="${task.id == null ? 'Create Task' : 'Update Task'}">Save</button>
      </div>
    </form>
  </div>
</main>
</body>
</html>